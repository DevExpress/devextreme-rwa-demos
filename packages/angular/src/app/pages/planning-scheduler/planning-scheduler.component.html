<div class="view-wrapper">
  <div class='panels'>
    <left-side-panel class="left-side-panel">
      <div class="left-side-panel-content">
        <div class='buttons'>
          <dx-button text='Today'></dx-button>
          <dx-button text='Create event' type='default'></dx-button>
        </div>
        <div class='calendar'>
          <dx-calendar [value]="currentDate" (valueChange)="onSetDate" ></dx-calendar>
        </div>
        <calendar-list [dataSource]="listDataSource"
                       (listSelectionChanged)="calendarListChanged($event)"></calendar-list>
      </div>
    </left-side-panel>

    <div class='scheduler-container'>
      <dx-scheduler #schedulerRef
        [adaptivityEnabled]="!!(screen.xSmallScreenChanged | async)"
        [allDayPanelMode]="'hidden'"
        height='inherit'
        [dataSource]="tasks"
        [currentView]="currentView"
        [currentDate]="currentDate"
        [startDayHour]="4"
        [appointmentTooltipTemplate]="'tooltip-template'"
        (currentViewChange)="currentView = $event"
        (onAppointmentClick)="onAppointmentClick()"
        (onCellClick)="onCellClick($event)"
      >
        <dxi-resource
          fieldExpr="calendarId"
          label="Calendar"
          [dataSource]="resourcesList"
        >
        </dxi-resource>
        <dxi-view type='day'></dxi-view>
        <dxi-view type='workWeek'></dxi-view>
        <dxi-view type='month'></dxi-view>
        <dxi-view type='agenda'></dxi-view>
        <div *dxTemplate="let data of 'tooltip-template'">
          <appointment-tooltip [data]="data.appointmentData"></appointment-tooltip>
        </div>
      </dx-scheduler>

    </div>

    <right-side-panel *ngIf="currentView === 'month'"
      class="right-side-panel"
      [isOpened]="isRightPanelOpen"
      [title]="selectedDate | date: 'EE, d MMMM'"
      (openedChange)="toggleRightPanelOpen($event)"
    >
      <div class="tasks-side-panel-content">
        <tasks-agenda-list [tasks]="selectedDateTasks"></tasks-agenda-list>
      </div>
    </right-side-panel>
  </div>
</div>

