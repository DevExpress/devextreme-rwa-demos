<div class="view-wrapper">
  <dx-toolbar>
    <dxi-item location="before">
      <span class="toolbar-header">Task</span>
    </dxi-item>
    <dxi-item location="before">
      <dx-tabs selectedIndex="0">
        <dxi-item text="List"></dxi-item>
        <dxi-item text="Kanban Board"></dxi-item>
        <dxi-item text="Gantt"></dxi-item>
      </dx-tabs>
    </dxi-item>

    <dxi-item location="after" locateInMenu="auto" widget="dxButton"
      [options]="{ icon: 'plus', text: 'Add Task', type: 'default', stylingMode: 'contained' }">
    </dxi-item>
    <dxi-item location="after" locateInMenu="auto">
      <div class="separator"></div>
    </dxi-item>
    <dxi-item location="after" locateInMenu="auto">
      <dx-drop-down-button icon="export" stylingMode="text" [dropDownOptions]="{ width: 220 }">
        <dxi-item icon="xlsxfile" text="Export all data"></dxi-item>
        <dxi-item icon="exportselected" text="Export selected rows"></dxi-item>
      </dx-drop-down-button>
    </dxi-item>
    <dxi-item location="after" locateInMenu="auto">
      <div class="separator"></div>
    </dxi-item>
    <dxi-item location="after" locateInMenu="auto" showText="inMenu" widget="dxButton"
      [options]="{text: 'Refresh', icon: 'refresh'}">
    </dxi-item>
    <dxi-item location="after" locateInMenu="auto">
      <div class="separator"></div>
    </dxi-item>
    <dxi-item location="after" locateInMenu="auto" showText="inMenu" widget="dxButton"
      [options]="{text: 'Overflow', icon: 'overflow'}">
    </dxi-item>
    <dxi-item location="after" locateInMenu="auto">
      <dx-text-box placeholder="Task Search" mode="search" [width]="180"></dx-text-box>
    </dxi-item>
  </dx-toolbar>

  <div class="task-list">
    <div class="grid">
      <dx-data-grid [dataSource]="dataSource" keyExpr="id">
        <dxo-selection selectAllMode="allPages" showCheckBoxesMode="always" mode="multiple"></dxo-selection>
        <dxo-scrolling mode="virtual"></dxo-scrolling>
        <dxo-sorting mode="multiple"></dxo-sorting>
        <dxi-column dataField="name" caption="TASK"></dxi-column>
        <dxi-column dataField="date" caption="Due Date"
            [customizeText]="customizeDateText"></dxi-column>
        <dxi-column dataField="owner" caption="Owner"
            [hidingPriority]="3"></dxi-column>
        <dxi-column dataField="priority" caption="Priority"
            cellTemplate="cellPriorityTemplate"></dxi-column>
        <dxi-column dataField="status" caption="Status"
            cellTemplate="cellStatusTemplate" [minWidth]="120"></dxi-column>
        <dxi-column dataField="estimated" caption="Estimated"
            [hidingPriority]="1"></dxi-column>
        <dxi-column dataField="consumed" caption="Consumed"
            [customizeText]="customizeHyphetText" [hidingPriority]="2"></dxi-column>
        <dxi-column dataField="progress" caption="%"
            cellTemplate="cellProgressTemplate"></dxi-column>

        <div *dxTemplate="let c of 'cellPriorityTemplate'">
          <div class="cell-priority {{ c.data.priority.toLowerCase() }}">
            <div class="separator"></div>
            <span>{{ c.data.priority }}</span>
          </div>
        </div>

        <div *dxTemplate="let c of 'cellStatusTemplate'">
          <div class="cell-status ">
            <span class="{{ getJoinClass(c.data.status.toLowerCase()) }}">{{ c.data.status }}</span>
          </div>
        </div>

        <div *dxTemplate="let c of 'cellProgressTemplate'">
          <dx-progress-bar
            [min]="0"
            [max]="100"
            [value]="c.data.progress"
            [class.complete]="c.data.progress == 100">
          </dx-progress-bar>
        </div>

      </dx-data-grid>
    </div>
  </div>
</div>
