<div class="view-wrapper">
  <dx-toolbar>
    <dxi-item location="before">
      <span class="toolbar-header">Task</span>
    </dxi-item>
    <dxi-item location="before">
      <dx-tabs selectedIndex="0" [items]="tabPanelItems" (onItemClick)="tabValueChange($event)">
      </dx-tabs>
    </dxi-item>
  </dx-toolbar>

  <div class="task-list" [ngSwitch]="displayTaskComponent">
    <div *ngSwitchCase="tabPanelItems[0].text" class="grid">
      <dx-data-grid [dataSource]="dataSource" keyExpr="id" (onRowPrepared)="onRowPreparedGrid($event)">
        <dxo-search-panel [visible]="true" placeholder="Task Search"></dxo-search-panel>
        <dxo-export [enabled]="true" [allowExportSelectedData]="true"></dxo-export>
        <dxo-selection selectAllMode="allPages" showCheckBoxesMode="always" mode="multiple"></dxo-selection>
        <dxo-scrolling mode="virtual"></dxo-scrolling>
        <dxo-sorting mode="multiple"></dxo-sorting>

        <dxo-toolbar>
          <dxi-item location="after" locateInMenu="auto" widget="dxButton"
            [options]="{ icon: 'plus', text: 'Add Task', type: 'default', stylingMode: 'contained' }">
          </dxi-item>
          <dxi-item location="after" locateInMenu="auto">
            <div class="separator"></div>
          </dxi-item>
          <dxi-item name="exportButton"></dxi-item>
          <dxi-item location="after" locateInMenu="auto">
            <div class="separator"></div>
          </dxi-item>
          <dxi-item location="after" locateInMenu="auto" showText="inMenu" widget="dxButton"
            [options]="{text: 'Refresh', icon: 'refresh'}">
          </dxi-item>
          <dxi-item location="after" locateInMenu="auto">
            <div class="separator"></div>
          </dxi-item>
          <dxi-item location="after" locateInMenu="auto" showText="inMenu" widget="dxButton"
            [options]="{text: 'Overflow', icon: 'overflow'}">
          </dxi-item>
          <dxi-item name="searchPanel" locateInMenu="auto"></dxi-item>
        </dxo-toolbar>

        <dxi-column dataField="name" caption="Subject"></dxi-column>
        <dxi-column dataField="company" caption="Company"></dxi-column>
        <dxi-column dataField="priority" caption="Priority" cellTemplate="cellPriorityTemplate"></dxi-column>
        <dxi-column dataField="startDate" caption="Start Date" dataType="date"></dxi-column>
        <dxi-column dataField="dueDate" caption="Due Date" dataType="date"></dxi-column>
        <dxi-column dataField="owner" caption="Owner" [hidingPriority]="3"></dxi-column>
        <dxi-column dataField="status" caption="Status"
          cellTemplate="cellStatusTemplate" [minWidth]="120"></dxi-column>

        <div *dxTemplate="let c of 'cellPriorityTemplate'">
          <div class="cell-priority {{ c.data.priority }}">
            <div class="separator"></div>
            <span>{{ c.data.priority }}</span>
          </div>
        </div>

        <div *dxTemplate="let c of 'cellStatusTemplate'">
          <div class="cell-status">
            <span class="{{ spaceToUnderscore(c.data.status) }}">{{ c.data.status }}</span>
          </div>
        </div>

      </dx-data-grid>
    </div>
    <div *ngSwitchCase="tabPanelItems[1].text" class="kanban">
      <span>Kanban</span>
    </div>
    <div *ngSwitchCase="tabPanelItems[2].text" class="gantt">
      <span>Gantt</span>
    </div>
  </div>
</div>
