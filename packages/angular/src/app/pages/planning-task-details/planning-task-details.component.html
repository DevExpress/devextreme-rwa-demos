<div class="view-wrapper">
  <dx-toolbar>
    <dxi-item
      location="before"
      widget="dxButton"
      [options]="{ icon: 'arrowleft' }"
    ></dxi-item>
    <dxi-item location="before">
      <span class="toolbar-header">{{ task?.text }}</span>
    </dxi-item>

    <dxi-item location="after" locateInMenu="auto">
      <dx-drop-down-button
        text="ACTIONS"
        stylingMode="contained"
        [ngClass]="'actions'"
        [items]="[{ text: 'Duplicate' }, { text: 'Close' }, { text: 'Delete' }]"
      ></dx-drop-down-button>
    </dxi-item>
    <dxi-item
      location="after"
      locateInMenu="auto"
      widget="dxButton"
      [options]="{ icon: 'attach' }"
    ></dxi-item>
    <dxi-item
      location="after"
      locateInMenu="auto"
      widget="dxButton"
      [options]="{ icon: 'refresh', onClick: refresh }"
    ></dxi-item>
    <dxi-item location="after" locateInMenu="auto">
      <div class="separator"></div>
    </dxi-item>
  </dx-toolbar>

  <div class="panels">
    <div class="left">
      <task-form [task]="task"></task-form>
    </div>

    <div class="right">
      <div class="dx-card">
        <dx-tab-panel [showNavButtons]="true" [deferRendering]="false">
          <dxi-item title="Activities">
            <card-activities
              [activities]="task?.activities"
              [showBy]="true"
            ></card-activities>
          </dxi-item>
          <dxi-item title="Notes">
            <card-notes [items]="task?.notes" [user]="task?.owner"></card-notes>
          </dxi-item>
          <dxi-item title="Messages" [badge]="task?.messages.length">
            <card-messages
              [items]="task?.messages"
              [user]="task?.owner"
            ></card-messages>
          </dxi-item>
        </dx-tab-panel>
      </div>
    </div>
  </div>
</div>
