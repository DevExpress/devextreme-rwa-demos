<div id="card-opportunies">
  <ng-container *ngIf="!isLoading">
    <dx-button
      text="Add Opportunity"
      icon="add"
      width="300"
      height="115"
      stylingMode="outlined"
      type="default"
      class="add-tile"
      (onClick)="addOpportunity()"
    ></dx-button>

    <div class="opportunities-block">
      <div class="dx-form-group-caption">Active</div>
      <div class="opportunities-container">
        <div class="opportunities" *ngFor="let data of openedActivities">
          <ng-conteiner
            [ngTemplateOutlet]="opportunity"
            [ngTemplateOutletContext]="{ item: data }"
          ></ng-conteiner>
        </div>
      </div>
    </div>

    <div class="opportunities-block">
      <div class="dx-form-group-caption">Closed</div>
      <div class="opportunities-container">
        <div class="opportunities" *ngFor="let data of closedActivities">
          <ng-conteiner
            [ngTemplateOutlet]="opportunity"
            [ngTemplateOutletContext]="{ item: data }"
          ></ng-conteiner>
        </div>
      </div>
    </div>

    <ng-template #opportunity let-item="item">
      <div (click)="opportunityClick()" class="opportunity">
        <div class="name">{{ item.name }}</div>
        <div class="product-info"
          >Products: {{ item.products }}, total:
          <span class="total">{{ item.total | currency }}</span>
        </div>
        <div class="owner">
          Owner: <span class="owner-name">{{ item.manager }}</span>
        </div>
      </div>
    </ng-template>
  </ng-container>

  <dx-load-panel
    [visible]="isLoading"
    [showPane]="false"
    container="#card-opportunies"
    [position]="{ of: '#card-opportunies' }"
  ></dx-load-panel>
</div>
